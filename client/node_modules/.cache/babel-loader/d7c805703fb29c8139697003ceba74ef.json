{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\zcool\\\\Desktop\\\\yellow-chat\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\zcool\\\\Desktop\\\\yellow-chat\\\\client\\\\src\\\\pages\\\\Chat.js\";\n\n// App.js\nimport React, { useState, useEffect } from 'react';\nimport useSocket from 'use-socket.io-client';\nimport { useImmer } from 'use-immer';\nimport './index.css';\nimport Navy from '../components/Navy';\nimport { BrowserRouter as Router, Switch, Route, Link, useParams } from \"react-router-dom\";\n\nvar Messages = function Messages(props) {\n  return props.data.map(function (m) {\n    return m[0] !== '' ? /*#__PURE__*/React.createElement(\"li\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 62\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 66\n      }\n    }, m[0]), \" : \", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"innermsg\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 92\n      }\n    }, m[1])) : /*#__PURE__*/React.createElement(\"li\", {\n      className: \"update\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 140\n      }\n    }, m[1]);\n  });\n};\n\nvar Online = function Online(props) {\n  return props.data.map(function (m) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      id: m[0],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 45\n      }\n    }, m[1]);\n  });\n};\n\nexport default function Chat() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      id = _useState2[0],\n      setId = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      nameInput = _useState4[0],\n      setNameInput = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      room = _useState6[0],\n      setRoom = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      input = _useState8[0],\n      setInput = _useState8[1];\n\n  var _useSocket = useSocket('https://open-chat-naostsaecf.now.sh'),\n      _useSocket2 = _slicedToArray(_useSocket, 1),\n      socket = _useSocket2[0];\n\n  socket.connect();\n\n  var _useImmer = useImmer([]),\n      _useImmer2 = _slicedToArray(_useImmer, 2),\n      messages = _useImmer2[0],\n      setMessages = _useImmer2[1];\n\n  var _useImmer3 = useImmer([]),\n      _useImmer4 = _slicedToArray(_useImmer3, 2),\n      online = _useImmer4[0],\n      setOnline = _useImmer4[1]; //set room name based on props.match.params\n\n\n  var _useParams = useParams(),\n      vendorName = _useParams.vendorName;\n\n  console.log(\"!!!!!! \", vendorName); // on load, set room to be name of vendor, which came from useParams.\n\n  useEffect(function () {\n    setRoom(vendorName);\n  }, []);\n  useEffect(function () {\n    socket.on('message que', function (nick, message) {\n      setMessages(function (draft) {\n        draft.push([nick, message]);\n      });\n    });\n    socket.on('update', function (message) {\n      return setMessages(function (draft) {\n        draft.push(['', message]);\n      });\n    });\n    socket.on('people-list', function (people) {\n      var newState = [];\n\n      for (var person in people) {\n        newState.push([people[person].id, people[person].nick]);\n      }\n\n      setOnline(function (draft) {\n        draft.push.apply(draft, newState);\n      });\n      console.log(online);\n    });\n    socket.on('add-person', function (nick, id) {\n      setOnline(function (draft) {\n        draft.push([id, nick]);\n      });\n    });\n    socket.on('remove-person', function (id) {\n      setOnline(function (draft) {\n        return draft.filter(function (m) {\n          return m[0] !== id;\n        });\n      });\n    });\n    socket.on('chat message', function (nick, message) {\n      setMessages(function (draft) {\n        draft.push([nick, message]);\n      });\n    });\n  }, 0);\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n\n    if (!nameInput) {\n      return alert(\"Name can't be empty\");\n    }\n\n    setId(nameInput);\n    socket.emit(\"join\", nameInput, room);\n  };\n\n  var handleSend = function handleSend(e) {\n    e.preventDefault();\n\n    if (input !== '') {\n      socket.emit('chat message', input, room);\n      setInput('');\n    }\n  };\n\n  return id ? /*#__PURE__*/React.createElement(\"section\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'row'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    id: \"messages\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Messages, {\n    data: messages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"ul\", {\n    id: \"online\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, \" \\uD83C\\uDF10 : \", /*#__PURE__*/React.createElement(Online, {\n    data: online,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"sendform\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return handleSend(e);\n    },\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"m\",\n    onChange: function onChange(e) {\n      return setInput(e.target.value.trim());\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    style: {\n      width: '75px'\n    },\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 75\n    }\n  }, \"Send\")))) :\n  /*#__PURE__*/\n  //(conditional rendereing here possibly)\n  React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Navy, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'center',\n      margin: '30vh auto',\n      width: '70%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, \"Chat with \", room), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: function onSubmit(event) {\n      return handleSubmit(event);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    onChange: function onChange(e) {\n      return setNameInput(e.target.value.trim());\n    },\n    required: true,\n    placeholder: \"What is your name ..\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 128\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, \"Submit\"))));\n}\n;","map":{"version":3,"sources":["C:/Users/zcool/Desktop/yellow-chat/client/src/pages/Chat.js"],"names":["React","useState","useEffect","useSocket","useImmer","Navy","BrowserRouter","Router","Switch","Route","Link","useParams","Messages","props","data","map","m","Online","Chat","id","setId","nameInput","setNameInput","room","setRoom","input","setInput","socket","connect","messages","setMessages","online","setOnline","vendorName","console","log","on","nick","message","draft","push","people","newState","person","filter","handleSubmit","e","preventDefault","alert","emit","handleSend","display","flexDirection","target","value","trim","width","textAlign","margin","event"],"mappings":"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","sourcesContent":["// App.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport useSocket from 'use-socket.io-client';\r\nimport { useImmer } from 'use-immer';\r\nimport './index.css';\r\nimport Navy from '../components/Navy'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  useParams\r\n} from \"react-router-dom\";\r\n\r\n\r\nconst Messages = props => props.data.map(m => m[0] !== '' ? (<li><strong>{m[0]}</strong> : <div className=\"innermsg\">{m[1]}</div></li>) : (<li className=\"update\">{m[1]}</li>));\r\n\r\nconst Online = props => props.data.map(m => <li id={m[0]}>{m[1]}</li>)\r\n\r\nexport default function Chat() {\r\n  const [id, setId] = useState('');\r\n  const [nameInput, setNameInput] = useState('');\r\n  const [room, setRoom] = useState('');\r\n  const [input, setInput] = useState('');\r\n\r\n  const [socket] = useSocket('https://open-chat-naostsaecf.now.sh');\r\n  socket.connect();\r\n\r\n  const [messages, setMessages] = useImmer([]);\r\n\r\n  const [online, setOnline] = useImmer([]);\r\n\r\n  //set room name based on props.match.params\r\n  const { vendorName } = useParams();\r\n  console.log(\"!!!!!! \",vendorName);\r\n\r\n  // on load, set room to be name of vendor, which came from useParams.\r\n  useEffect(() => {\r\n    setRoom(vendorName);\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    socket.on('message que', (nick, message) => {\r\n      setMessages(draft => {\r\n        draft.push([nick, message])\r\n      })\r\n    });\r\n\r\n    socket.on('update', message => setMessages(draft => {\r\n      draft.push(['', message]);\r\n    }))\r\n\r\n    socket.on('people-list', people => {\r\n      let newState = [];\r\n      for (let person in people) {\r\n        newState.push([people[person].id, people[person].nick]);\r\n      }\r\n      setOnline(draft => { draft.push(...newState) });\r\n      console.log(online)\r\n    });\r\n\r\n    socket.on('add-person', (nick, id) => {\r\n      setOnline(draft => {\r\n        draft.push([id, nick])\r\n      })\r\n    })\r\n\r\n    socket.on('remove-person', id => {\r\n      setOnline(draft => draft.filter(m => m[0] !== id))\r\n    })\r\n\r\n    socket.on('chat message', (nick, message) => {\r\n      setMessages(draft => { draft.push([nick, message]) })\r\n    })\r\n  }, 0);\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    if (!nameInput) {\r\n      return alert(\"Name can't be empty\");\r\n    }\r\n    setId(nameInput);\r\n    socket.emit(\"join\", nameInput, room);\r\n  };\r\n\r\n  const handleSend = e => {\r\n    e.preventDefault();\r\n    if (input !== '') {\r\n      socket.emit('chat message', input, room);\r\n      setInput('');\r\n    }\r\n  }\r\n\r\n  return id ? (\r\n    <section style={{ display: 'flex', flexDirection: 'row' }} >\r\n      <ul id=\"messages\"><Messages data={messages} /></ul>\r\n      <ul id=\"online\"> 🌐 : <Online data={online} /> </ul>\r\n      <div id=\"sendform\">\r\n        <form onSubmit={e => handleSend(e)} style={{ display: 'flex' }}>\r\n          <input id=\"m\" onChange={e => setInput(e.target.value.trim())} /><button style={{ width: '75px' }} type=\"submit\">Send</button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  ) : (\r\n    //(conditional rendereing here possibly)\r\n      <div>\r\n        <Navy />\r\n        <div style={{ textAlign: 'center', margin: '30vh auto', width: '70%' }}>\r\n          {/* <img src={process.env.PUBLIC_URL + '/yellowchat-logo2.PNG'} /> */}\r\n          <h2>Chat with {room}</h2>\r\n          {/* //how to use the props? */}\r\n\r\n          <form onSubmit={event => handleSubmit(event)}>\r\n\r\n            <input id=\"name\" onChange={e => setNameInput(e.target.value.trim())} required placeholder=\"What is your name ..\" /><br />\r\n            {/* <input id=\"room\" onChange={e => setRoom(roomName)} placeholder=\"What is your room ..\" /><br /> */}\r\n            <button type=\"submit\">Submit</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}